<?php/** * Front action find and replace for public pages * * @param $buffer - all page html and inline css, js * @return mixed - result of action */function far_ob_call( $buffer ) { // $buffer contains entire page	/**	 * current language	 */	global $mltlngg_current_language;	$far_settings = get_all("static_translate");	$temp=[];	$buffer = preg_replace_callback("/(&#[0-9]+;)/", function($m) { return mb_convert_encoding($m[1], "UTF-8", "HTML-ENTITIES"); }, $buffer);	foreach( $far_settings as $row ) {			foreach ($row as $key => $value) {				$temp[$key] = $value;							}			$buffer = str_replace('{{'.$temp['Serch_rule'].'}}', $temp[$mltlngg_current_language], $buffer );	}	/**	 * remove all extra spaces and line breaks	 */	//$buffer = preg_replace("|[\s]+|s", " ", $buffer);	return $buffer;}/** * Add action in before load page */function template_redirect() {	ob_start( 'far_ob_call' );}add_action( 'template_redirect', 'template_redirect' );